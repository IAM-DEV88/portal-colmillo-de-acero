---
import Layout from '../../components/layout/Layout.astro';
---

<Layout title="Guía de ICC Heroico">
  <main class="min-h-screen py-4 text-gray-100">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <header class="text-center mb-12 animate-fade-in">
        <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-blue-300 to-blue-500 font-title tracking-wider">
          ICC 25 HEROICO - MECÁNICAS
        </h1>
        <div class="w-48 h-0.5 bg-gradient-to-r from-blue-900/0 via-blue-500/80 to-blue-900/0 mx-auto my-6"></div>
      </header>

      <!-- Video Section -->
      <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl overflow-hidden border border-blue-900/30 mb-6">
        <div class="relative" style="padding-bottom: 56.25%;">
          <iframe 
            id="youtube-player"
            class="absolute top-0 left-0 w-full h-full"
            src=""
            title="Guía de Mecánicas ICC Heroico"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
          </iframe>
        </div>
        <div class="p-4 text-sm text-gray-400 border-t border-blue-900/30 bg-gray-900/20">
          <div class="flex flex-wrap justify-between items-center">
            <div>
              <span class="text-gray-500">Video original por:</span>
              <a href="https://www.youtube.com/@muchamiel" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 ml-1">
                Muchamiel
              </a>
            </div>
            <div class="mt-2 sm:mt-0">
              <span class="text-gray-500">Aportado por:</span>
              <span class="text-amber-400 ml-1">EdielP</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Timeline Navigation -->
      <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 mb-8 border border-blue-900/30">
        <h2 class="text-2xl font-bold text-blue-300 mb-4 flex items-center">
          <i class="fas fa-list-ul mr-2"></i>
          Navegación por Tiempo
        </h2>
        <div class="space-y-2">
          <a href="#" data-timestamp="0" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">0:00</span>
            <span class="text-blue-100 group-hover:text-white">Lord Tuétano</span>
          </a>
          <a href="#" data-timestamp="344" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">5:44</span>
            <span class="text-blue-100 group-hover:text-white">Lady Susurramuerte</span>
          </a>
          <a href="#" data-timestamp="837" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">13:57</span>
            <span class="text-blue-100 group-hover:text-white">Batalla Naval</span>
          </a>
          <a href="#" data-timestamp="1154" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">19:14</span>
            <span class="text-blue-100 group-hover:text-white">Libramorte Colmillosauro</span>
          </a>
          <a href="#" data-timestamp="1724" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">28:44</span>
            <span class="text-blue-100 group-hover:text-white">Panzachancro</span>
          </a>
          <a href="#" data-timestamp="1972" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">32:52</span>
            <span class="text-blue-100 group-hover:text-white">Carapútrea</span>
          </a>
          <a href="#" data-timestamp="2200" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">36:40</span>
            <span class="text-blue-100 group-hover:text-white">Profesor Putricidio</span>
          </a>
          <a href="#" data-timestamp="2655" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">44:15</span>
            <span class="text-blue-100 group-hover:text-white">Príncipes de Sangre (Council)</span>
          </a>
          <a href="#" data-timestamp="3108" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">51:48</span>
            <span class="text-blue-100 group-hover:text-white">Reina de Sangre Lana'thel</span>
          </a>
          <a href="#" data-timestamp="3380" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">56:20</span>
            <span class="text-blue-100 group-hover:text-white">Valithria</span>
          </a>
          <a href="#" data-timestamp="3599" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">59:59</span>
            <span class="text-blue-100 group-hover:text-white">Sindragosa</span>
          </a>
          <a href="#" data-timestamp="4132" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">1:08:52</span>
            <span class="text-blue-100 group-hover:text-white">REY EXÁNIME LK</span>
          </a>
          <a href="#" data-timestamp="4956" class="flex items-center p-3 rounded-lg hover:bg-blue-900/30 transition-colors group">
            <span class="w-20 text-blue-400 text-sm font-mono group-hover:text-blue-300">1:22:36</span>
            <span class="text-blue-100 group-hover:text-white">Final</span>
          </a>
        </div>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const player = document.getElementById('youtube-player');
      const timeLinks = document.querySelectorAll('[data-timestamp]');
      const videoId = 'Pty46HvdmEo';
      const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
      const origin = isLocalhost ? 'http://localhost:3000' : 'https://colmillo.netlify.app';
      
      // Initialize player with the correct origin
      player.src = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=${origin}&rel=0`;
      
      // Function to handle timestamp clicks
      function handleTimeLinkClick(e) {
        e.preventDefault();
        const timestamp = parseInt(this.getAttribute('data-timestamp'));
        
        // For better cross-origin compatibility, we'll reload the iframe with the new timestamp
        player.src = `https://www.youtube.com/embed/${videoId}?start=${timestamp}&autoplay=1&enablejsapi=1&origin=${origin}&rel=0`;
        
        // Update active state
        timeLinks.forEach(l => l.classList.remove('bg-blue-900/50', 'ring-2', 'ring-blue-500'));
        this.classList.add('bg-blue-900/50', 'ring-2', 'ring-blue-500');
      }

      // Add click event to all timestamp links
      timeLinks.forEach(link => {
        link.addEventListener('click', handleTimeLinkClick);
      });
    });
  </script>

  <style>
    .aspect-w-16 {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
    }
    .aspect-w-16 iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</Layout>
